<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    servidor
</body>
<script src="/socket.io/socket.io.js">
    let ws = new WebSocket("ws://localhost:9090");

    const payLoad = {
      "methodo":"conectarServer",
      "idcliente": 0 
    }
    ws.onopen = () => ws.send(JSON.stringify(payLoad));

    //recebe mensagem do servidor
    ws.onmessage = message => {
      //mensagem.data
      const resposta = JSON.parse(message.data);
      //cliente NAO ESTA SENDO USADO
      if(resposta.methodo === "connect"){
        idcliente=resposta.idcliente;
        console.log("id do cliente adquirido com sucesso!" + idcliente);
      }
      //jogo
      if(resposta.methodo === "novojogo"){
        idjogo=resposta.jogo.id;
        console.log("id do jogo adquirido com sucesso!" + idjogo);
        //while true
        const payLoad = {
          "methodo": "jogando",
          "idcliente": 0,
          "posição": 1
        }
      ws.send(JSON.stringify(payLoad))
      }
      ws.onmessage = message => {
      //mensagem.data
      const resposta = JSON.parse(message.data);
        if (resposta.methodo === "jogando"){
            const teste = document.createElement("div");
            const test1 = document.createTextNode("Eae");
            teste.appendChild(test1);
            const test2 = document.getElementById("btncriar");
            document.body.insertBefore(teste, test2);
        }
    }
    }
  var socket = io();
</script>
</html>