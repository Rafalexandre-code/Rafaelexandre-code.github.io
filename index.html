<!DOCTYPE html>
<html>
  <head>
    <title>Websocket</title>
    <style>
      body {
        display: flex;
        justify-content: center;
      }

      canvas {
        border: solid 1px black;
      }
    </style>
  <body>
    <button id="btncriar">Novo Jogo</button>
  </body>
<script>
  let idcliente = null;
  let ws = new WebSocket("ws://localhost:9090")

  //resgata do botão
  const btncriar = document.getElementById("btncriar");
    //adiciona um evento
    btncriar.addEventListener("click", e=>{
      const payLoad ={
        "methodo":"novojogo",
        "idcliente": 1
      }
      //manda coisas para o servidor
      ws.send(JSON.stringify(payLoad))
    })
    


    //recebe mensagem do servidor
    ws.onmessage = message => {
      //mensagem.data
      const resposta = JSON.parse(message.data);
      //cliente
      if(resposta.methodo ==="connect"){
        idcliente=resposta.idcliente;
        console.log("id do cliente adquirido com sucesso!" + idcliente);
      }
      //jogo
      if(resposta.methodo ==="novojogo"){
        idjogo=resposta.jogo.id;
        console.log("id do jogo adquirido com sucesso!" + idjogo);

        //while true
        const payLoad={
          "methodo":"jogando",
          "posição": 1
        }
      ws.send(JSON.stringify(payLoad))
      }
    }


  //jogo
  

</script>
</html>